<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#764ba2">
  <title>Recouple - Love Island Grid Game</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="images/icons/icon-192.png">
  <link rel="apple-touch-icon" href="images/icons/icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="app">

    <!-- â•â•â• HEADER â•â•â• -->
    <header id="header">
      <div class="header-top">
        <h1 class="logo">ğŸ’• Recouple</h1>
        <div class="header-actions">
          <button id="btn-help-mode" class="icon-btn" aria-label="Toggle hints">ğŸ’¡</button>
          <button id="btn-stats" class="icon-btn" aria-label="Statistics">ğŸ“Š</button>
          <button id="btn-help" class="icon-btn" aria-label="How to play">â“</button>
        </div>
      </div>
      <div class="header-meta">
        <div class="game-tabs" id="game-tabs">
          <button class="game-tab active" data-game="1">Game 1</button>
          <button class="game-tab locked" data-game="2">Game 2 ğŸ”’</button>
          <button class="game-tab locked" data-game="3">Game 3 ğŸ”’</button>
        </div>
      </div>
      <div class="stats-bar" id="stats-bar">
        <span class="stat" id="stat-round">Round 1/12</span>
        <span class="stat-divider">â€¢</span>
        <span class="stat" id="stat-score">Score: 0</span>
        <span class="stat-divider">â€¢</span>
        <span class="stat" id="stat-drafted">Drafted: 0/12</span>
      </div>
    </header>

    <!-- â•â•â• DRAFT CONTAINER â•â•â• -->
    <section id="draft-container" class="draft-container">
      <h2 class="draft-title" id="draft-title">ğŸƒ Round 1 â€” Pick a Contestant</h2>
      <div class="draft-cards" id="draft-cards">
        <!-- Cards injected by JS -->
      </div>
      <button id="btn-confirm" class="btn-confirm" disabled>Confirm Pick</button>
    </section>

    <!-- â•â•â• OPTIMIZATION BANNER â•â•â• -->
    <section id="optimize-banner" class="optimize-banner hidden">
      <div class="optimize-content">
        <h2>ğŸ¯ Optimization Phase</h2>
        <p>Tap any two tiles to swap them. Maximize your score!</p>
      </div>
      <button id="btn-finish" class="btn-finish">Finish & Score â†’</button>
    </section>

    <!-- â•â•â• GAME BOARD â•â•â• -->
    <section id="board-section" class="board-section">
      <div class="board-wrapper">
        <!-- Column headers -->
        <div class="board-header">
          <div class="corner-cell"></div>
          <div class="col-label">ğŸ‘‘<br><span>Winner</span></div>
          <div class="col-label">ğŸ’‘<br><span>Coupled</span></div>
          <div class="col-label">ğŸ <br><span>Casa</span></div>
          <div class="col-label" id="col4-label">ğŸ”„<br><span>Loading...</span></div>
        </div>
        <!-- Grid rows -->
        <div class="board-row" data-row="0">
          <div class="row-label">ğŸ‡ºğŸ‡¸<br><span>USA</span></div>
          <div class="cell" data-index="0"></div>
          <div class="cell" data-index="1"></div>
          <div class="cell" data-index="2"></div>
          <div class="cell" data-index="3"></div>
        </div>
        <div class="board-row" data-row="1">
          <div class="row-label">ğŸ‡¬ğŸ‡§<br><span>UK</span></div>
          <div class="cell" data-index="4"></div>
          <div class="cell" data-index="5"></div>
          <div class="cell" data-index="6"></div>
          <div class="cell" data-index="7"></div>
        </div>
        <div class="board-row" data-row="2">
          <div class="row-label">ğŸ†<br><span>Finale</span></div>
          <div class="cell" data-index="8"></div>
          <div class="cell" data-index="9"></div>
          <div class="cell" data-index="10"></div>
          <div class="cell" data-index="11"></div>
        </div>
      </div>
    </section>

    <!-- â•â•â• SCORE BREAKDOWN â•â•â• -->
    <section id="score-panel" class="score-panel">
      <div class="score-row">
        <span class="score-label">â­ Base Points</span>
        <span class="score-value" id="score-base">0</span>
      </div>
      <div class="score-row">
        <span class="score-label">ğŸ’• Couple Bonus</span>
        <span class="score-value" id="score-couples">0</span>
      </div>
      <div class="score-row">
        <span class="score-label">ğŸï¸ Season Bonus</span>
        <span class="score-value" id="score-seasons">0</span>
      </div>
      <div class="score-row">
        <span class="score-label">ğŸ“Š Row/Col Bonus</span>
        <span class="score-value" id="score-completion">0</span>
      </div>
      <div class="score-row">
        <span class="score-label">âœ¨ Perfect Grid</span>
        <span class="score-value" id="score-perfect">0</span>
      </div>
      <div class="score-row total">
        <span class="score-label">TOTAL</span>
        <span class="score-value" id="score-total">0</span>
      </div>
    </section>

    <!-- â•â•â• COMPLETED OVERLAY â•â•â• -->
    <div id="complete-overlay" class="overlay hidden">
      <div class="overlay-card">
        <h2>ğŸ‰ Game Complete!</h2>
        <div class="final-score" id="final-score">0</div>
        <div class="final-label">points</div>
        <div id="final-breakdown" class="final-breakdown"></div>
        <div class="overlay-actions">
          <button id="btn-share" class="btn-primary">ğŸ“‹ Share Results</button>
          <button id="btn-next-game" class="btn-secondary">Next Game â†’</button>
        </div>
        <div id="share-toast" class="share-toast hidden">Copied to clipboard!</div>
      </div>
    </div>

    <!-- â•â•â• STATS OVERLAY â•â•â• -->
    <div id="stats-overlay" class="overlay hidden">
      <div class="overlay-card">
        <h2>ğŸ“Š Your Stats</h2>
        <div class="stats-grid" id="stats-grid">
          <!-- Injected by JS -->
        </div>
        <button class="btn-secondary close-overlay">Close</button>
      </div>
    </div>

    <!-- â•â•â• HELP OVERLAY â•â•â• -->
    <div id="help-overlay" class="overlay hidden">
      <div class="overlay-card help-card">
        <h2>How to Play ğŸ’•</h2>
        <div class="help-content">
          <div class="help-section">
            <h3>ğŸƒ Draft Phase (12 Rounds)</h3>
            <p>Each round, pick 1 of 3 Love Island contestants. Tap a card to select, then tap a board cell to place them. Higher stars = more points!</p>
          </div>
          <div class="help-section">
            <h3>ğŸ“‹ The Grid</h3>
            <p>3Ã—4 board. Rows = show (USA, UK, Finale). Columns = trait (Winner, Coupled, Casa Amor, + a daily rotating column). A contestant scores points only if they match BOTH the row AND column.</p>
            <p style="margin-top:6px;font-size:0.85rem;opacity:0.7">ğŸ”„ The 4th column rotates daily: S6+ â†’ OG Era â†’ Bombshell â†’ Day 1</p>
          </div>
          <div class="help-section">
            <h3>ğŸ”„ Inspect & Swap</h3>
            <p>Double-tap a tile to inspect it â€” see all their traits and which cells they'd be valid in. Tap a tile then tap another to swap them!</p>
          </div>
          <div class="help-section">
            <h3>â­ Scoring</h3>
            <p><strong>Base:</strong> Valid placement = star value (1/2/3/5 pts)<br>
            <strong>ğŸ’• Couple:</strong> Real couple adjacent = +3 per person<br>
            <strong>ğŸï¸ Season:</strong> Same season adjacent = +1 per person<br>
            <strong>ğŸ“Š Complete:</strong> Full row = +5, full column = +5<br>
            <strong>âœ¨ Perfect:</strong> All 12 filled = +20 bonus</p>
          </div>
          <div class="help-section">
            <h3>ğŸ® 3 Games Per Day</h3>
            <p>Complete Game 1 to unlock Game 2, then Game 3. Same daily puzzle for everyone!</p>
          </div>
        </div>
        <button class="btn-secondary close-overlay">Got it!</button>
      </div>
    </div>

    <!-- â•â•â• ALL DONE OVERLAY â•â•â• -->
    <div id="alldone-overlay" class="overlay hidden">
      <div class="overlay-card">
        <h2>ğŸŒ… All Done Today!</h2>
        <p>You've completed all 3 games. Come back tomorrow for new puzzles!</p>
        <div id="today-scores" class="today-scores"></div>
        <button class="btn-secondary close-overlay">Close</button>
      </div>
    </div>

  </div>

  <!-- Canvas for confetti -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Scripts -->
  <script src="js/scoring.js"></script>
  <script src="js/draft.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/game.js"></script>
  <script src="js/ui.js"></script>
</body>
</html>
